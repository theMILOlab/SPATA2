<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>`spata2` object Set up &amp; Manipulation • SPATA2</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="`spata2` object Set up &amp; Manipulation">
<meta property="og:description" content="SPATA2">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SPATA2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/spata-v2-installation.html">Installation</a>
</li>
<li>
  <a href="../articles/spata-v2-spata-data.html">SPATAData</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Around the spata2 object</li>
    <li>
      <a href="../articles/spata-v2-object-initiation-and-manipulation.html">Object Set Up and Manipulation</a>
    </li>
    <li>
      <a href="../articles/spata-v2-platform-compatibility.html">Platform Compatibility</a>
    </li>
    <li>
      <a href="../articles/spata-v2-autoencoder.html">Autoencoder</a>
    </li>
    <li>
      <a href="../articles/spata-v2-genes-gene-sets-and-features.html">Genes, Gene Sets and Features</a>
    </li>
    <li class="dropdown-header">Image Analysis</li>
    <li>
      <a href="../articles/spata-v2-image-handling.html">Image Handling</a>
    </li>
    <li>
      <a href="../articles/spata-v2-image-annotations.html">Image Annotations</a>
    </li>
    <li>
      <a href="../articles/spata-v2-spatial-segmentation.html">Spatial Segmentation</a>
    </li>
    <li class="dropdown-header">Analysis of Gene Expression</li>
    <li>
      <a href="../articles/spata-v2-cnv-analysis.html">Copy Number Variations</a>
    </li>
    <li>
      <a href="../articles/spata-v2-clustering.html">Clustering</a>
    </li>
    <li>
      <a href="../articles/spata-v2-dea.html">Differential Expression</a>
    </li>
    <li>
      <a href="../articles/spata-v2-gsea.html">Gene Set Enrichment</a>
    </li>
    <li class="dropdown-header">Expression Gradients &amp; Gradient Screening</li>
    <li>
      <a href="../articles/spata-v2-spatial-trajectories.html">Spatial Trajectories</a>
    </li>
    <li>
      <a href="../articles/spata-v2-spatial-trajectory-screening.html">Spatial Trajectory Screening</a>
    </li>
    <li>
      <a href="../articles/spata-v2-image-annotation-screening.html">Image Annotation Screening</a>
    </li>
    <li>
      <a href="../articles/spata-v2-scd.html">Integrate Single Cell Deconvolution</a>
    </li>
    <li class="dropdown-header">Visualization</li>
    <li>
      <a href="../articles/spata-v2-plotting-surface.html">Surface Plotting</a>
    </li>
    <li>
      <a href="../articles/spata-v2-plotting-misc.html">Miscellaneous</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Code &amp; Concept
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/cc-spatial-measures.html">Spatial Measures</a>
    </li>
    <li>
      <a href="../articles/cc-spatial-segmentation-vs-image-annotations.html">Spatial Segmentation vs. Image Annotations</a>
    </li>
    <li>
      <a href="../articles/cc-spatial-trajectory-screening.html">Spatial Trajectory Screening</a>
    </li>
    <li>
      <a href="../articles/cc-image-annotation-screening.html">Image Annotation Screening</a>
    </li>
    <li>
      <a href="../articles/cc-model-fitting-in-spatial-transcriptomic-studies.html">Model Fitting</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>
<code>spata2</code> object Set up &amp;
Manipulation</h1>
            
      
      
      <div class="hidden name"><code>spata-v2-object-initiation-and-manipulation.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># load packages</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://themilolab.com/" class="external-link">SPATA2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></code></pre></div>
<p>The center of <strong>SPATA2</strong> is an S4-object of class
<code>spata2</code>. This vignette explains the basis of it’s structure
and more importantly the most basic functions to create one as well as
to manipulate it.</p>
<div class="section level2">
<h2 id="create-a-spata2-object">1. Create a <code>spata2</code> object<a class="anchor" aria-label="anchor" href="#create-a-spata2-object"></a>
</h2>
<p>The easiest way to create one from scratch with your data is via the
<code>initiateSpataObject_*()</code>functions.</p>
<div class="section level3">
<h3 id="from-10x-visium-folders">1.1 From 10X Visium folders<a class="anchor" aria-label="anchor" href="#from-10x-visium-folders"></a>
</h3>
<p>Behind the scenes <code><a href="../reference/initiateSpataObject_10X.html">initiateSpataObject_10X()</a></code> loads the
necessary data file as well as the histology image from the folder you
obtain from 10X Visium. It performs a variety of computations e.g. count
normalization, dimensionality reduction, clustering while relying on
gold-standard functions of the <a href="https://satijalab.org/seurat/" class="external-link"><code>Seurat</code></a>-package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">object_t275</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="../reference/initiateSpataObject_10X.html">initiateSpataObject_10X</a></span><span class="op">(</span>
    directory_10X <span class="op">=</span> <span class="st">"path/to/a/10Xvisium-folder"</span>, <span class="co"># the directory from which to load the data</span>
    sample_name <span class="op">=</span> <span class="st">"gbm-275"</span>
    <span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="with-a-matrix-and-coordinates">1.2 With a matrix and coordinates<a class="anchor" aria-label="anchor" href="#with-a-matrix-and-coordinates"></a>
</h3>
<p>There are two indispensable inputs needed in order to set up a
<code>spata2</code> object. As long as you provide those two you can use
<strong>SPATA2</strong> to analyze and visualize data deriving from all
kinds of experiments.</p>
<ul>
<li>A matrix in which the rows correspond to the gene names and the
columns correspond to the unique identifiers of every distinct location
(we refer to these locations as barcode-spots). Every cell of the matrix
subsequently corresponds to the expression values. This matrix can
either be an unprocessed count matrix or an already processed matrix
which we refer to as expression matrix. The example is a 10x10 subset of
an already processed matrix.</li>
</ul>
<pre><code><span class="co">##            AAACAAGTATCTCCCA-1 AAACACCAATAACTGC-1 AAACAGAGCGACTCCT-1</span>
<span class="co">## AL627309.1         0.00000000          1.0000000         0.03219694</span>
<span class="co">## AL669831.2         0.12571837          0.7143180         0.06505426</span>
<span class="co">## AL669831.5         0.07783532          0.8040467         0.14062911</span>
<span class="co">## FAM87B             0.13916475          0.7292328         0.07296636</span>
<span class="co">## LINC00115          0.25666142          0.6883596         0.00000000</span>
<span class="co">## FAM41C             1.00000000          0.6477934         0.13263546</span>
<span class="co">## AL645608.1         0.15857889          0.7022333         0.04904714</span>
<span class="co">## SAMD11             0.13929504          0.6638247         0.17781843</span>
<span class="co">## NOC2L              0.41453276          0.0000000         1.00000000</span>
<span class="co">## KLHL17             0.05927105          0.6688244         0.43051485</span>
<span class="co">##            AAACAGCTTTCAGAAG-1 AAACAGGGTCTATATT-1 AAACAGTGTTCCTGGG-1</span>
<span class="co">## AL627309.1         0.00000000          0.5636165          0.8875665</span>
<span class="co">## AL669831.2         0.12651164          0.5663211          0.7204619</span>
<span class="co">## AL669831.5         0.28041277          0.9790490          0.8132117</span>
<span class="co">## FAM87B             0.13134633          0.5841412          0.7210713</span>
<span class="co">## LINC00115          0.03239111          0.0000000          0.2144870</span>
<span class="co">## FAM41C             1.00000000          1.0000000          1.0000000</span>
<span class="co">## AL645608.1         0.12102254          0.5137110          0.7141826</span>
<span class="co">## SAMD11             0.25566425          0.7021117          0.6646854</span>
<span class="co">## NOC2L              0.69096436          0.9859252          0.0000000</span>
<span class="co">## KLHL17             0.32551350          0.6557542          0.2472023</span>
<span class="co">##            AAACATTTCCCGGATT-1 AAACCGGGTAGGTACC-1 AAACCGTTCGTCCAGG-1</span>
<span class="co">## AL627309.1          1.0000000         0.02437061          0.6291549</span>
<span class="co">## AL669831.2          0.7785258         0.16050206          0.6618059</span>
<span class="co">## AL669831.5          0.6796621         0.37621856          1.0000000</span>
<span class="co">## FAM87B              0.7926872         0.16628669          0.6805608</span>
<span class="co">## LINC00115           0.2490788         0.00000000          0.5193033</span>
<span class="co">## FAM41C              0.8483957         0.53188622          0.5971984</span>
<span class="co">## AL645608.1          0.7718748         0.14916640          0.6540970</span>
<span class="co">## SAMD11              0.7857686         0.25079273          0.5973341</span>
<span class="co">## NOC2L               0.0000000         1.00000000          0.0000000</span>
<span class="co">## KLHL17              0.5935567         0.22997498          0.6117876</span>
<span class="co">##            AAACCTAAGCAGCCGG-1</span>
<span class="co">## AL627309.1          0.6054902</span>
<span class="co">## AL669831.2          0.3943090</span>
<span class="co">## AL669831.5          1.0000000</span>
<span class="co">## FAM87B              0.4356422</span>
<span class="co">## LINC00115           0.0000000</span>
<span class="co">## FAM41C              0.9148817</span>
<span class="co">## AL645608.1          0.3334440</span>
<span class="co">## SAMD11              0.4980708</span>
<span class="co">## NOC2L               0.5031803</span>
<span class="co">## KLHL17              0.4672352</span></code></pre>
<ul>
<li>A coordinate data.frame that contains at least a column called
<em>barcodes</em> that is identical in it’s content to the column names
of the input matrix as well as a <em>x</em>- and a <em>y</em>-column
referring to the spatial coordinates of each barcode-spot. (The example
below shows a subset that corresponds to the matrix above.)</li>
</ul>
<pre><code><span class="co">##              barcodes      x      y</span>
<span class="co">## 1  AAACAAGTATCTCCCA-1 434.76 373.80</span>
<span class="co">## 2  AAACACCAATAACTGC-1 131.76 428.76</span>
<span class="co">## 3  AAACAGAGCGACTCCT-1 407.16 145.20</span>
<span class="co">## 4  AAACAGCTTTCAGAAG-1  96.00 327.00</span>
<span class="co">## 5  AAACAGGGTCTATATT-1 110.40 352.56</span>
<span class="co">## 6  AAACAGTGTTCCTGGG-1 218.64 518.16</span>
<span class="co">## 7  AAACATTTCCCGGATT-1 416.04 443.40</span>
<span class="co">## 8  AAACCGGGTAGGTACC-1 165.36 321.12</span>
<span class="co">## 9  AAACCGTTCGTCCAGG-1 215.88 384.96</span>
<span class="co">## 10 AAACCTAAGCAGCCGG-1 364.80 468.48</span></code></pre>
<p>Depending on whether your input matrix has already undergone
processing steps you need to decide whether you want to initiate the
<code>spata2</code> object with either
<code><a href="../reference/initiateSpataObject_CountMtr.html">initiateSpataObject_CountMtr()</a></code> or
<code><a href="../reference/initiateSpataObject_ExprMtr.html">initiateSpataObject_ExprMtr()</a></code>. As with any other function
run <code>?initiateSpataObject_*()</code> in your console to obtain a
detailed report on what is going on in the background and how to
manipulate the way your data is read in, processed and stored.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">object_t275</span> <span class="op">&lt;-</span> 
 <span class="fu"><a href="../reference/initiateSpataObject_CountMtr.html">initiateSpataObject_CountMtr</a></span><span class="op">(</span>
   coords_df <span class="op">=</span> <span class="va">example_coords_df</span>, <span class="co"># your coordinate data.frame</span>
   count_mtr <span class="op">=</span> <span class="va">example_count_mtr</span>, <span class="co"># a matrix with unprocessed count values</span>
   sample_name <span class="op">=</span> <span class="st">"gbm_1"</span>,
   image <span class="op">=</span> <span class="va">example_image</span>
   <span class="op">)</span>

<span class="va">object_t275</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="../reference/initiateSpataObject_ExprMtr.html">initiateSpataObject_ExprMtr</a></span><span class="op">(</span>
    coords_df <span class="op">=</span> <span class="va">example_coords_df</span>, <span class="co"># your coordinate data.frame</span>
    expr_mtr <span class="op">=</span> <span class="va">example_expr_mtr</span>, <span class="co"># a matrix with already processed (e.g. normalized) values</span>
    sample_name <span class="op">=</span> <span class="st">"gbm_1"</span>,
    image <span class="op">=</span> <span class="va">example_image</span>
    <span class="op">)</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="saving-and-loading-a-spata2-object">2. Saving and loading a <code>spata2</code> object<a class="anchor" aria-label="anchor" href="#saving-and-loading-a-spata2-object"></a>
</h2>
<p>As with any other object created in R you can save
<code>spata2</code> objects with the function
<code><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">base::saveRDS()</a></code>. However, <strong>SPATA2</strong> provides
some functionalities to make working with your objects as convenient as
possible. The object itself contains a slot in which you can store the
directory under which you want to save it every time you make progress
worth saving (after time consuming computations for example). You can
use <code><a href="../reference/getDefaultInstructions.html">getDirectoryInstructions()</a></code> to obtain a list of
directories that are currently stored in your <code>spata2</code>
object. (Click <a href="spata-v2-platform-compatibility.html">here</a>
to see how to create <code>spata2</code> objects from
<code>Seurat</code>, <code>Giotto</code> objects or <code>AnnData</code>
structures.)</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/getDefaultInstructions.html">getDirectoryInstructions</a></span><span class="op">(</span>object <span class="op">=</span> <span class="va">object_t275</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## $cell_data_set</span>
<span class="co">## [1] "not defined"</span>
<span class="co">## </span>
<span class="co">## $seurat_object</span>
<span class="co">## [1] "not defined"</span>
<span class="co">## </span>
<span class="co">## $spata_object</span>
<span class="co">## [1] "not defined"</span></code></pre>
<p>Use <code><a href="../reference/setSpataDir.html">setSpataDir()</a></code> to adjust the default directory under
which the object of interest is supposed to be stored.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># set/change the current default directory</span>
<span class="va">object_t275</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setSpataDir.html">setSpataDir</a></span><span class="op">(</span><span class="va">object_t275</span>, dir <span class="op">=</span> <span class="st">"dir/to/spata_objects/T275.RDS"</span><span class="op">)</span>

<span class="fu"><a href="../reference/getDefaultInstructions.html">getDirectoryInstructions</a></span><span class="op">(</span>object <span class="op">=</span> <span class="va">object_t275</span><span class="op">)</span></code></pre></div>
<p>If a default directory exists you can save the object without any
further input using <code><a href="../reference/saveSpataObject.html">saveSpataObject()</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># quickly save the `spata2` object under the default directory </span>
<span class="fu"><a href="../reference/saveSpataObject.html">saveSpataObject</a></span><span class="op">(</span>object <span class="op">=</span> <span class="va">object_t275</span><span class="op">)</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Jan Kueckelhaus, Dieter-Henrik Heiland, Simon Frerich.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
